<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link href="@{/css/bootstrap.min.css}" rel="stylesheet">
</head>

<body>
<div class="container">
    <table class="table table-hover">
        <thead>
        </thead>
        <br>
        <tbody>
        <tr class="table-info">
            <th colspan="2" class="text-center">결제정보</th>
        </tr>
        <tr class="table-light" >
            <th scope="row" class="text-center">이름</th>
            <td class="text-end" th:text="${paymentDetailsDTO.customerName}"></td>
        </tr>
        <tr class="table-light">
            <th scope="row" class="text-center">이메일</th>
            <td class="text-end" th:text="${paymentDetailsDTO.customerEmail}">
        </tr>
        <tr class="table-light">
            <th scope="row" class="text-center" >날짜</th>
            <td class="text-end" th:text="${paymentDetailsDTO.createTime}">

        </tr >
        <tr class="table-light">
            <th scope="row" class="text-center">문서번호</th>
            <td class="text-end" th:text="${paymentDetailsDTO.id}">
        </tr>
        <tr class="table-light">
            <th scope="row" class="text-center">제목</th>
            <td class="text-end" th:text="${paymentDetailsDTO.paymentTitle}">
        </tr>
        <tr class="table-light">
            <th scope="row" class="text-center">결제 구분</th>
            <td class="text-end" th:text="${paymentDetailsDTO.bizTo}">
        </tr>

        <tr class="table-light">
            <th scope="row" class="text-center">결제 금액</th>
            <td class="text-end" th:text="${paymentDetailsDTO.amount}">        </tr>

        <tr>
            <td class="text-center" colspan="2">
                <img id="qrCodeImage" src="" alt="QR Code">
            </td>
        </tr>

        <tr class="table-light">
            <th scope="row" class="text-center">url</th>
            <td class="text-center" colspan="2"><a id="paymentLink" href="">Payment Link</a></td>
        </tr>
        </tbody>
    </table>
    <div class="text-end">
        <button type="button" class="btn btn-success">결제</button>
<!--        <button type="button" class="btn btn-info">메일 전송</button>-->
        <button type="button" class="btn btn-warning">결제 완료 등록</button>
        <button type="button" class="btn btn-light">뒤로가기</button>
    </div>
</div>

<script>

     //(url는 현지에서 어떤 api를 사용할지 알수없어서 기존 url을 넣어뒀습니다 PaymentDetailsDTO에 payload를 추가하여 PaymentDetailsDTO를 수정하던지 entity를 구현해주세요)
    var url = "http://demo.nippon-kessai.link/aip/?member_registration=JTdCJTIyMCUyMiUzQSUyMjI2NjUlMjIlMkMlMjIxJTIyJTNBJTIydGVzdCUyMiU3RA==";

    // URL을 인코딩하여 QR 코드와 링크에 사용
    var encodedUrl = encodeURIComponent(url);

    // QR 코드 이미지 엘리먼트에 인코딩된 URL 적용
    document.getElementById('qrCodeImage').src = "https://chart.apis.google.com/chart?cht=qr&chs=200x200&chl=" + encodedUrl;

    // 링크 엘리먼트에 인코딩된 URL 적용
    document.getElementById('paymentLink').href = url;
    document.getElementById('paymentLink').innerText = url;
</script>

</body>
</html>