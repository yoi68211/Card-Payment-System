<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link th:href="@{/css/pageSample.css}" rel="stylesheet">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://kit.fontawesome.com/047f82d071.js" crossorigin="anonymous"></script>
</head>
<body>
<header class="header-nav">
    <span class="header-flex-box">
        <i class="fa-solid fa-list" id="sidebar-action-icon"></i>
         AIP System
    </span>

    <span class="header-pageName header-flex-box" >결제목록 / 전체 결제 목록</span><!-- 현재 페이지 이름 -->

    <span class="header-flex-box">
        <span class="header-flex-three">
            <span class="header-icon">
                <a href=""><i class="fa-solid fa-circle-question fa-xl"></i></a>
                <a href="#"><i class="fa-solid fa-comment-dots fa-xl"></i></i></a>
            </span>
            <img th:src="@{/img/defaultImg.png}" id="profile-img">
            <span id="submenu-trigger">
                <a href="#">Nacamora</a>
                <div id="submenu">
                    <a href="#">정보 변경</a>
                    <a href="#">비밀번호 변경</a>
                    <a href="#">로그아웃</a>
                </div>
            </span>
        </span>
    </span>
</header>
<main>
    <div class="main-cell">
        <!-- 여기서 작업하시면 됩니다. -->
        <button onclick="toggleContent()">상세 검색</button>
        <div id="expandableContent">
            <form id="form" hidden>
                <table>
                    <tr>
                        <td colspan="2">
                            <label>조회기간</label>
                            <label for="startDt"></label><input type="text" id="startDt" name="startDt"> ~
                            <label for="endDt"></label><input type="text" id="endDt" name="endDt">
                        </td>
                        <td>
                            <label>상태유형</label>
                            <button type="button" onclick="setStatus('전체')">전체</button>
                            <button type="button" onclick="setStatus('결제')">결제</button>
                            <button type="button" onclick="setStatus('미결제')">미결제</button>
                            <button type="button" onclick="setStatus('환불')">환불</button>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <button type="button" onclick="setDateRange(1)">1개월</button>
                            <button type="button" onclick="setDateRange(3)">3개월</button>
                            <button type="button" onclick="setDateRange(6)">6개월</button>
                            <button type="button" onclick="setDateRange(12)">1년</button>
                        </td>
                        <td>
                            <label for="docNumber">문서번호</label>
                            <input type="text" id="docNumber" name="docNumber" placeholder="문서번호를 입력해주세요.">
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <label for="customerName">고객이름</label>
                            <input type="text" id="customerName" name="customerName" placeholder="이름을 입력해주세요.">
                        </td>
                        <td>
                            <label for="email">메일주소</label>
                            <input type="email" id="email" name="email" placeholder="메일을 입력해주세요.">
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3" style="text-align: right;">
                            <button type="button" onclick="resetForm()">초기화</button>
                            <button type="button" onclick="submitForm()">조회</button>
                        </td>
                    </tr>
                </table>
            </form>
        </div>

        <div>
            <button type="button" id="deleteButton" disabled>삭제</button>
            <label for="searchInput"></label><input type="text" id="searchInput" placeholder="검색어를 입력해 주세요">
        </div>

        <table class="custom-table" border="1">
            <thead>
            <tr>
                <th>선택</th>
                <th>등록일시</th>
                <th>문서번호</th>
                <th>고객명</th>
                <th>제목</th>
                <th>금액</th>
                <th>상태</th>
            </tr>
            </thead>
            <tbody>
                <tr th:each="payment : ${payList}">
                    <td><label><input type="checkbox" name="selectedPayment" /></label></td>
                    <td th:text="${#temporals.format(payment.createTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
                    <td th:text="${payment.documentNo}"></td>
                    <td th:text="${payment.name}">
                    <td th:text="${payment.title}"></td>
                    <td th:text="${payment.amount}"></td>
                    <td th:text="${payment.status}"></td>
                </tr>
            </tbody>
        </table>

        <script>
            $(function() {
                $("#startDt").datepicker({
                    dateFormat: 'yy-mm-dd',
                    onSelect: function(selectedDate) {
                        var endDate = $('#endDt');
                        var startDate = $(this).datepicker('getDate');
                        startDate.setDate(startDate.getDate() + 1);
                        endDate.datepicker('option', 'minDate', startDate);
                    }
                });

                $("#endDt").datepicker({
                    dateFormat: 'yy-mm-dd',
                    onSelect: function(selectedDate) {
                        var startDate = $('#startDt');
                        var endDate = $(this).datepicker('getDate');
                        endDate.setDate(endDate.getDate() - 1);
                        startDate.datepicker('option', 'maxDate', endDate);
                    }
                });
            });

            function toggleContent() {
                var content = document.getElementById("form");
                if (content.hasAttribute("hidden")) {
                    content.removeAttribute("hidden"); // 펼쳐짐
                } else {
                    content.setAttribute("hidden", true); // 접힘
                }
            }

            function setDateRange(months) {
                var endDate = new Date();
                var startDate = new Date();
                startDate.setMonth(startDate.getMonth() + months);

                // 종료일을 계산된 값으로 설정
                $('#endDt').datepicker('setDate', startDate);

                // 시작일을 오늘 날짜로 설정
                $('#startDt').datepicker('setDate', endDate);
            }

            function resetForm() {
                document.getElementById("form").reset();
            }

            function submitForm() {
                // 조회 기능 구현
            }
        </script>
    </div>
</main>
<aside>
<span id="sidebar">
    <nav>
        <ul>
            <li> <!-- 현재 페이지 의 해당하는 span태그에 style="color: blue;" 써주세여  -->
                <span>
                    <i class="fa-solid fa-table-cells"></i>
                    <span class="sidebar-nav-text">DashBoard</span>
                </span>
                <i class="fa-solid fa-chevron-right"></i>
            </li>
            <li>
                <span>
                    <i class="fa-solid fa-credit-card"></i>
                    <span class="sidebar-nav-text">결제등록</span>
                </span>
                <i class="fa-solid fa-chevron-right"></i>
            </li>
            <li>
                <span style="color: blue;">
                    <i class="fa-solid fa-rectangle-list"></i>
                    <span class="sidebar-nav-text">결제목록</span>
                </span>
                <i class="fa-solid fa-chevron-down" id="payList-toggle"></i>
            </li>
            <li class="payList-nav">
                <span class="payList" style="color: blue;">
                    <i class="fa-solid fa-square fa-2xs"></i>
                    <span class="sidebar-nav-text">전체 결제 목록</span>
                </span>
                <!-- <i class="fa-solid fa-chevron-right"></i> -->
            </li>
            <li class="payList-nav">
                <span class="payList">
                    <i class="fa-solid fa-square fa-2xs"></i>
                    <span class="sidebar-nav-text" >자동 결제 목록</span>
                </span>
                <!-- <i class="fa-solid fa-chevron-right"></i> -->
            </li>
        </ul>
    </nav>
    </span>
</aside>
</body>
<script th:src="@{/js/pageSample.js}"></script>
</html>