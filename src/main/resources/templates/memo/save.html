<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>메모글 작성</title>
    <link th:href="@{/css/memoSave.css}" rel="stylesheet">
    <link th:href="@{/css/pageSample.css}" rel="stylesheet">
</head>
<body>
<header class="header-nav">
        <span class="header-flex-box header-logo">
        
            <span class="sidebar-action-border">
                <img th:src="@{/img/header_sidebar.png}" id="sidebar-action-icon">
            </span>
            <a href="/dashboard">AIP System</a>
        </span>

    <span class="header-pageName header-flex-box" >메모글 작성</span><!-- 현재 페이지 이름 -->

    <span class="header-flex-box">
            <span class="header-flex-three">
                <span class="header-icon">
                    <a href="#"><img th:src="@{/img/help.png}" id="help_icon"></a>
                    <a href="#" ><img th:src="@{/img/chart.png}" id="chart_icon"></a>
                    <a href="#" class="nowPage"><img th:src="@{/img/memo.png}" id="memo_icon"></a>
                </span>
                <img th:src="@{/img/profileImg.png}" id="profile-img">
                <span id="submenu-trigger">
                    <a href="#">Nacamora</a>
                    <div id="submenu">
                        <a href="#">정보 변경</a>
                        <a href="#">비밀번호 변경</a>
                        <a href="/logout">로그아웃</a>
                    </div>
                </span>
            </span>
        </span>
</header>
<main>
<!-- action 속성: 목적지(서버주소), method 속성: http request method(get,post) -->
    <div class="memoWriteMain">
        <div class="memoWriteText">
            <span>Memo 등록하기</span>
        </div>
        <form action="/memo/save" method="post">
            <div class="memoExposeRadio">
                대시보드 노출<input type="radio" name="memoExposeYn" value="Y">Y <input type="radio" name="memoExposeYn" value="N">N<br>
            </div>
            <div class = "contentText">
                <span>내용</span>
            </div>
            <div>
                <textarea  name="MemoContents"></textarea>
            </div>
            <div class="listAndSubmit">
                <button class = "listButton" onclick="backToPaging()"> < 목록으로</button>
                <input class = "saveButton"  type="submit" value="저장하기">
            </div>
        </form>
    </div>
</main>
<aside>
    <span id="sidebar">
        <nav>
            <ul class="sidebar-ul">
                <li onclick="location.href='/dashboard'" > <!-- 현재 페이지 의 해당하는 span태그에 style="color: blue;" 써주세여  -->
                    <span>
                        <img th:src="@{/img/sidebar_dashboard.png}" id="sidebar_dashboard_icon">
                        <span class="sidebar-nav-text">DashBoard</span>
                    </span>
                    <i class="fa-solid fa-chevron-right"></i>
                </li>
                <li onclick="location.href='/insert_form'">
                    <span>
                        <img th:src="@{/img/sidebar_card.png}" id="sidebar_card_icon">
                        <span class="sidebar-nav-text">결제등록</span>
                    </span>
                    <i class="fa-solid fa-chevron-right"></i>
                </li>
                <li onclick="location.href='#'">
                    <span>
                        <img th:src="@{/img/sidebar_payList.png}" id="sidebar_payList_icon">
                        <span class="sidebar-nav-text">결제목록</span>
                    </span>
                    <i class="fa-solid fa-chevron-down" id="payList-toggle"></i>
                </li>
                <li class="payList-nav" onclick="location.href='#'">
                    <span class="payList">
                        <i class="fa-solid fa-square fa-2xs"></i>
                        <span class="sidebar-nav-text">전체 결제 목록</span>
                    </span>
                    <!-- <i class="fa-solid fa-chevron-right"></i> -->
                </li>
                <li class="payList-nav" onclick="location.href='#'">
                    <span class="payList">
                        <i class="fa-solid fa-square fa-2xs"></i>
                        <span class="sidebar-nav-text" >자동 결제 목록</span>
                    </span>
                    <!-- <i class="fa-solid fa-chevron-right"></i> -->
                </li>
            </ul>
        </nav>
    </span>
</aside>
</body>
<script>
    const backToPaging = () => {
      location.href = "/memo/paging";
   }

   const saveButton = document.querySelector('.saveButton');

    saveButton.addEventListener('click', function(event) {
        // 라디오 버튼 요소 가져오기
        const radioButtons = document.querySelectorAll('input[name="memoExposeYn"]');

        // 라디오 버튼 중 하나라도 선택되었는지 확인
        let isChecked = false;
        radioButtons.forEach(function(button) {
            if (button.checked) {
                isChecked = true;
            }
        });

        // 라디오 버튼이 하나도 선택되지 않은 경우
        if (!isChecked) {
            // 알림창 띄우기
            alert("대시보드 노출여부를 선택해 주십시오 Y=네, N = 아니오");
            event.preventDefault(); // 기본 동작 방지 (페이지 새로고침 방지)
            return false;
        }

        // textarea 내용 가져오기
        const memoContents = document.querySelector('textarea[name="MemoContents"]').value;

        // 정규식 패턴 설정 (1자 이상, 300자 이하)
        const pattern = /^.{1,300}$/;

        // 정규식 검사
        if (!pattern.test(memoContents)) {
            // 유효하지 않은 경우
            alert("1자이상, 300자 이하로 입력해 주십시오");
            event.preventDefault(); // 기본 동작 방지 (페이지 새로고침 방지)
            return false;
        }

        // 유효한 경우
        return true;
    });

</script>
</html>
